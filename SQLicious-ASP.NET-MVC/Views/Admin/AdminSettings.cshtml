@{
    ViewData["Title"] = "Admin Settings";
}

<nav class="admin-navbar">
    <ul class="navbar-nav">
        <li class="nav-item">
            <a href="@Url.Action("MenuSettings", "MenuItem")" class="nav-link">Menu Settings</a>
        </li>
        <li class="nav-item">
            <a href="@Url.Action("AdminSettings", "Admin")" class="nav-link">Admin Settings</a>
        </li>
        <li class="nav-item">
            <a href="@Url.Action("Index", "Booking")" class="nav-link">Booking Settings</a>
        </li>
        <li class="nav-item">
            <form asp-action="Logout" asp-controller="Admin" method="post" style="display:inline;">
                <button type="submit" class="btn btn-link nav-link" style="text-decoration: none;">Logout</button>
            </form>
        </li>
    </ul>
</nav>

<div>
    <!-- Display TempData messages -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">
            @TempData["SuccessMessage"]
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">
            @TempData["ErrorMessage"]
        </div>
    }
</div>

<div class="d-flex justify-content-between">
    <div>
        <h3>Account Management</h3>
        <a href="@Url.Action("Enable2FA", "TwoFactorAuth")" class="btn btn-warning mb-4">Enable Two-Factor Authentication</a>
        <a href="@Url.Action("ChangePassword", "Admin")" class="btn btn-primary mb-4">Change Password</a>
    </div>

    <div id="statisticsSection" class="ml-4" style="min-width: 200px;">
        <h3>Booking Statistics</h3>
        <div id="statisticsDisplay"></div>
    </div>
</div>

<script>
    async function fetchStatistics() {
        const response = await fetch('/api/Admin/BookingStatistics');
        const data = await response.json();
        document.getElementById('statisticsDisplay').innerText = `Total Bookings: ${data.totalBookings}`;
    }

    fetchStatistics();
</script>
