@using SQLicious_ASP.NET_MVC.Models.DTOs
@model IEnumerable<MenuItemDTO>
@{
    ViewData["Title"] = "MenuSettings";
}

<nav class="admin-navbar">
    <ul class="navbar-nav">
        <li class="nav-item">
            <a href="@Url.Action("MenuSettings", "MenuItem")" class="nav-link">Menu Settings</a>
        </li>
        <li class="nav-item">
            <a href="@Url.Action("AdminSettings", "Admin")" class="nav-link">Admin Settings</a>
        </li>
        <li class="nav-item">
            <!-- Logout button -->
            <form asp-action="Logout" asp-controller="Admin" method="post" style="display:inline;">
                <button type="submit" class="btn btn-link nav-link" style="text-decoration: none;">Logout</button>
            </form>
        </li>
    </ul>
</nav>

<h2>Hantera Måltider</h2>

<!-- Button to create a new menu item -->
<a href="@Url.Action("Create", "MenuItem")" class="btn btn-primary mb-4">Skapa en måltid</a>

<!-- Frukost Section -->
<h3>Frukost</h3>
<table class="table">
    <thead>
        <tr>
            <th>Namn</th>
            <th>Beskrivning</th>
            <th>Pris</th>
            <th>Tillgängligt</th>
            <th>Åtgärd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Where(m => m.MenuType == MenuType.Frukost))
        {
            <!-- Display Row (initial view mode) -->
            <tr id="view-row-@item.MenuItemId">
                <td>@item.Name</td>
                <td>@item.Description</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.IsAvailable</td>
                <td>
                    <button class="btn btn-warning" onclick="toggleEdit(@item.MenuItemId)">Edit</button>
                    <form method="post" action="@Url.Action("Delete", "MenuItem", new { id = item.MenuItemId })" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>

            <!-- Edit Row (hidden by default) -->
            <tr id="edit-row-@item.MenuItemId" style="display:none;">
                <form method="post" action="@Url.Action("Edit", "MenuItem", new { id = item.MenuItemId })">
                <td>
                    <input type="text" name="Name" value="@item.Name" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Description" value="@item.Description" class="form-control" />
                </td>
                <td>
                    <input type="number" step="0.01" name="Price" value="@item.Price" class="form-control" />
                </td>
                <td>
                    <input type="checkbox" name="IsAvailable" class="form-check-input" @(item.IsAvailable ? "checked" : "") />
                </td>
                <td>
                    <button type="submit" class="btn btn-success">Confirm</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEdit(@item.MenuItemId)">Cancel</button>
                </td>
                </form>
            </tr>
        }
    </tbody>
</table>

<!-- Brunch Section -->
<h3>Brunch</h3>
<table class="table">
    <thead>
        <tr>
            <th>Namn</th>
            <th>Beskrivning</th>
            <th>Pris</th>
            <th>Tillgängligt</th>
            <th>Åtgärd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Where(m => m.MenuType == MenuType.Brunch))
        {
            <!-- Display Row (initial view mode) -->
            <tr id="view-row-@item.MenuItemId">
                <td>@item.Name</td>
                <td>@item.Description</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.IsAvailable</td>
                <td>
                    <button class="btn btn-warning" onclick="toggleEdit(@item.MenuItemId)">Edit</button>
                    <form method="post" action="@Url.Action("Delete", "MenuItem", new { id = item.MenuItemId })" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>

            <!-- Edit Row (hidden by default) -->
            <tr id="edit-row-@item.MenuItemId" style="display:none;">
                <form method="post" action="@Url.Action("Edit", "MenuItem", new { id = item.MenuItemId })">
                <td>
                    <input type="text" name="Name" value="@item.Name" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Description" value="@item.Description" class="form-control" />
                </td>
                <td>
                    <input type="number" step="0.01" name="Price" value="@item.Price" class="form-control" />
                </td>
                <td>
                    <input type="checkbox" name="IsAvailable" class="form-check-input" @(item.IsAvailable ? "checked" : "") />
                </td>
                <td>
                    <button type="submit" class="btn btn-success">Confirm</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEdit(@item.MenuItemId)">Cancel</button>
                </td>
                </form>
            </tr>
        }
    </tbody>
</table>


<!-- Lunch Section -->
<h3>Lunch</h3>
<table class="table">
    <thead>
        <tr>
            <th>Namn</th>
            <th>Beskrivning</th>
            <th>Pris</th>
            <th>Tillgängligt</th>
            <th>Åtgärd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Where(m => m.MenuType == MenuType.Lunch))
        {
            <!-- Display Row (initial view mode) -->
            <tr id="view-row-@item.MenuItemId">
                <td>@item.Name</td>
                <td>@item.Description</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.IsAvailable</td>
                <td>
                    <button class="btn btn-warning" onclick="toggleEdit(@item.MenuItemId)">Edit</button>
                    <form method="post" action="@Url.Action("Delete", "MenuItem", new { id = item.MenuItemId })" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>

            <!-- Edit Row (hidden by default) -->
            <tr id="edit-row-@item.MenuItemId" style="display:none;">
                <form method="post" action="@Url.Action("Edit", "MenuItem", new { id = item.MenuItemId })">
                <td>
                    <input type="text" name="Name" value="@item.Name" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Description" value="@item.Description" class="form-control" />
                </td>
                <td>
                    <input type="number" step="0.01" name="Price" value="@item.Price" class="form-control" />
                </td>
                <td>
                    <input type="checkbox" name="IsAvailable" class="form-check-input" @(item.IsAvailable ? "checked" : "") />
                </td>
                <td>
                    <button type="submit" class="btn btn-success">Confirm</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEdit(@item.MenuItemId)">Cancel</button>
                </td>
                </form>
            </tr>
        }
    </tbody>
</table>


<!-- Middag Section -->
<h3>Middag</h3>
<table class="table">
    <thead>
        <tr>
            <th>Namn</th>
            <th>Beskrivning</th>
            <th>Pris</th>
            <th>Tillgängligt</th>
            <th>Åtgärd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Where(m => m.MenuType == MenuType.Middag))
        {
            <!-- Display Row (initial view mode) -->
            <tr id="view-row-@item.MenuItemId">
                <td>@item.Name</td>
                <td>@item.Description</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.IsAvailable</td>
                <td>
                    <button class="btn btn-warning" onclick="toggleEdit(@item.MenuItemId)">Edit</button>
                    <form method="post" action="@Url.Action("Delete", "MenuItem", new { id = item.MenuItemId })" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>

            <!-- Edit Row (hidden by default) -->
            <tr id="edit-row-@item.MenuItemId" style="display:none;">
                <form method="post" action="@Url.Action("Edit", "MenuItem", new { id = item.MenuItemId })">
                <td>
                    <input type="text" name="Name" value="@item.Name" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Description" value="@item.Description" class="form-control" />
                </td>
                <td>
                    <input type="number" step="0.01" name="Price" value="@item.Price" class="form-control" />
                </td>
                <td>
                    <input type="checkbox" name="IsAvailable" class="form-check-input" @(item.IsAvailable ? "checked" : "") />
                </td>
                <td>
                    <button type="submit" class="btn btn-success">Confirm</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEdit(@item.MenuItemId)">Cancel</button>
                </td>
                </form>
            </tr>
        }
    </tbody>
</table>


<!-- Julbord Section -->
<h3>Julbord</h3>
<table class="table">
    <thead>
        <tr>
            <th>Namn</th>
            <th>Beskrivning</th>
            <th>Pris</th>
            <th>Tillgängligt</th>
            <th>Åtgärd</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Where(m => m.MenuType == MenuType.Julbord))
        {
            <!-- Display Row (initial view mode) -->
            <tr id="view-row-@item.MenuItemId">
                <td>@item.Name</td>
                <td>@item.Description</td>
                <td>@item.Price.ToString("C")</td>
                <td>@item.IsAvailable</td>
                <td>
                    <button class="btn btn-warning" onclick="toggleEdit(@item.MenuItemId)">Edit</button>
                    <form method="post" action="@Url.Action("Delete", "MenuItem", new { id = item.MenuItemId })" style="display:inline;">
                        <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                </td>
            </tr>

            <!-- Edit Row (hidden by default) -->
            <tr id="edit-row-@item.MenuItemId" style="display:none;">
                <form method="post" action="@Url.Action("Edit", "MenuItem", new { id = item.MenuItemId })">
                <td>
                    <input type="text" name="Name" value="@item.Name" class="form-control" />
                </td>
                <td>
                    <input type="text" name="Description" value="@item.Description" class="form-control" />
                </td>
                <td>
                    <input type="number" step="0.01" name="Price" value="@item.Price" class="form-control" />
                </td>
                <td>
                    <input type="checkbox" name="IsAvailable" class="form-check-input" @(item.IsAvailable ? "checked" : "") />
                </td>
                <td>
                    <button type="submit" class="btn btn-success">Confirm</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleEdit(@item.MenuItemId)">Cancel</button>
                </td>
                </form>
            </tr>
        }
    </tbody>
</table>


<script>
    function toggleEdit(itemId) {
        var viewRow = document.getElementById("view-row-" + itemId);
        var editRow = document.getElementById("edit-row-" + itemId);

        if (viewRow.style.display === "none") {
            viewRow.style.display = "";
            editRow.style.display = "none";
        } else {
            viewRow.style.display = "none";
            editRow.style.display = "";
        }
    }
</script>
